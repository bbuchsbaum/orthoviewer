<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Proxy object for controlling an orthogonal viewer from Shiny — ortho_proxy • orthoviewer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Proxy object for controlling an orthogonal viewer from Shiny — ortho_proxy"><meta name="description" content="The proxy sends lightweight JSON messages from R to the browser,
where the JavaScript htmlwidget binding translates them into viewer
operations (adding layers, changing window/threshold/colormap, etc.).
An R6 class that provides methods for controlling an ortho_viewer widget
from Shiny server code. Created via ortho_proxy()."><meta property="og:description" content="The proxy sends lightweight JSON messages from R to the browser,
where the JavaScript htmlwidget binding translates them into viewer
operations (adding layers, changing window/threshold/colormap, etc.).
An R6 class that provides methods for controlling an ortho_viewer widget
from Shiny server code. Created via ortho_proxy()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orthoviewer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/orthoviewer-intro.html">Introduction to orthoviewer</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Proxy object for controlling an orthogonal viewer from Shiny</h1>

      <div class="d-none name"><code>ortho_proxy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The proxy sends lightweight JSON messages from R to the browser,
where the JavaScript htmlwidget binding translates them into viewer
operations (adding layers, changing window/threshold/colormap, etc.).</p>
<p>An R6 class that provides methods for controlling an ortho_viewer widget
from Shiny server code. Created via <code>ortho_proxy()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ortho_proxy</span><span class="op">(</span><span class="va">outputId</span>, session <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/domains.html" class="external-link">getDefaultReactiveDomain</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-outputid">outputId<a class="anchor" aria-label="anchor" href="#arg-outputid"></a></dt>
<dd><p>The id of the <code>ortho_viewer</code> widget in the UI.</p></dd>


<dt id="arg-session">session<a class="anchor" aria-label="anchor" href="#arg-session"></a></dt>
<dd><p>The Shiny session; defaults to the current reactive domain.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>OrthoViewerProxy</code> object with methods for controlling
the viewer. All methods return the proxy invisibly for chaining.</p>
    </div>
    <div class="section level2">
    <h2 id="proxy-methods">Proxy Methods<a class="anchor" aria-label="anchor" href="#proxy-methods"></a></h2>


<dl><dt><code>add_layer(vol, id, thresh, range, colormap, opacity)</code></dt>
<dd><p>Add a new overlay layer to the viewer.</p></dd>

<dt><code>set_window(range, layer_id)</code></dt>
<dd><p>Set the display window (intensity range) for a layer.</p></dd>

<dt><code>set_threshold(thresh, layer_id)</code></dt>
<dd><p>Set the threshold range for a layer.</p></dd>

<dt><code>set_colormap(colormap, layer_id)</code></dt>
<dd><p>Set the colormap for a layer.</p></dd>

<dt><code>set_opacity(alpha, layer_id)</code></dt>
<dd><p>Set the opacity for a layer.</p></dd>

<dt><code>set_crosshair(x, y, z, animate, duration)</code></dt>
<dd><p>Set the crosshair position in world coordinates.</p></dd>

<dt><code>get_crosshair(request_id)</code></dt>
<dd><p>Request the current crosshair position.</p></dd>

<dt><code>show_layer(layer_id)</code></dt>
<dd><p>Make a layer visible.</p></dd>

<dt><code>hide_layer(layer_id)</code></dt>
<dd><p>Hide a layer.</p></dd>

<dt><code>set_layer_visible(layer_id, visible)</code></dt>
<dd><p>Set layer visibility explicitly.</p></dd>

<dt><code>set_layer_order(layer_ids)</code></dt>
<dd><p>Reorder layers in the stack.</p></dd>

<dt><code>remove_layer(layer_id)</code></dt>
<dd><p>Remove a layer from the viewer.</p></dd>

<dt><code>get_layers(request_id)</code></dt>
<dd><p>Request a list of all layers.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="crosshair-navigation">Crosshair Navigation<a class="anchor" aria-label="anchor" href="#crosshair-navigation"></a></h2>


<p>The <code>set_crosshair()</code> method allows programmatic navigation to any
world coordinate. Coordinates are in millimeters relative to the volume's
origin. The optional <code>animate</code> parameter enables smooth transitions.</p>
<p>The <code>get_crosshair()</code> method is asynchronous - it sends a request to
the browser and the result is returned via a Shiny input. Access the
result through <code>input$&lt;outputId&gt;_crosshair_response</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="layer-control">Layer Control<a class="anchor" aria-label="anchor" href="#layer-control"></a></h2>


<p>Layers are identified by their <code>layer_id</code> string, which is assigned
when adding a layer via <code>add_layer()</code>. The background layer always
has the id <code>"background"</code>.</p>
<p>Layer ordering determines which layers appear on top. Use
<code>set_layer_order()</code> with a character vector of layer IDs, where
the first element is at the bottom and the last is on top.</p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>id</code></dt>
<dd><p>The output ID of the viewer widget.</p></dd>


<dt><code>session</code></dt>
<dd><p>The Shiny session object.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-OrthoViewerProxy-new"><code>OrthoViewerProxy$new()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-add_layer"><code>OrthoViewerProxy$add_layer()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-set_window"><code>OrthoViewerProxy$set_window()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-set_threshold"><code>OrthoViewerProxy$set_threshold()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-set_colormap"><code>OrthoViewerProxy$set_colormap()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-set_opacity"><code>OrthoViewerProxy$set_opacity()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-set_crosshair"><code>OrthoViewerProxy$set_crosshair()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-get_crosshair"><code>OrthoViewerProxy$get_crosshair()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-show_layer"><code>OrthoViewerProxy$show_layer()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-hide_layer"><code>OrthoViewerProxy$hide_layer()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-set_layer_visible"><code>OrthoViewerProxy$set_layer_visible()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-set_layer_order"><code>OrthoViewerProxy$set_layer_order()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-remove_layer"><code>OrthoViewerProxy$remove_layer()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-get_layers"><code>OrthoViewerProxy$get_layers()</code></a></p></li>
<li><p><a href="#method-OrthoViewerProxy-clone"><code>OrthoViewerProxy$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-OrthoViewerProxy-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new OrthoViewerProxy object.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/ortho_proxy.html">OrthoViewerProxy</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">id</span>, session <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/domains.html" class="external-link">getDefaultReactiveDomain</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>id</code></dt>
<dd><p>The output ID of the ortho_viewer widget.</p></dd>


<dt><code>session</code></dt>
<dd><p>The Shiny session object.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-add_layer"></a><div class="section">
<h3 id="method-add-layer-">Method <code>add_layer()</code><a class="anchor" aria-label="anchor" href="#method-add-layer-"></a></h3>
<p>Add a new overlay layer to the viewer.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">add_layer</span><span class="op">(</span></span>
<span>  <span class="va">vol</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  thresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  range <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  colormap <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>  opacity <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>vol</code></dt>
<dd><p>Volume data - can be a 3D array or a neuroim2 NeuroVol object.</p></dd>


<dt><code>id</code></dt>
<dd><p>Character string: unique identifier for this layer. If NULL,
a timestamp-based ID is generated.</p></dd>


<dt><code>thresh</code></dt>
<dd><p>Numeric vector of length 2: threshold range c(low, high).
Voxels with values between low and high are made transparent.
Use c(0, 0) for no thresholding.</p></dd>


<dt><code>range</code></dt>
<dd><p>Numeric vector of length 2: display range c(min, max) for
colormap scaling. If NULL, the volume's data range is used.</p></dd>


<dt><code>colormap</code></dt>
<dd><p>Character string: name of the colormap to use.
Options include "viridis", "hot", "cool", "Greys", "RdBu", etc.</p></dd>


<dt><code>opacity</code></dt>
<dd><p>Numeric: layer opacity from 0 (transparent) to 1 (opaque).</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-set_window"></a><div class="section">
<h3 id="method-set-window-">Method <code>set_window()</code><a class="anchor" aria-label="anchor" href="#method-set-window-"></a></h3>
<p>Set the display window (intensity range) for a layer.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">set_window</span><span class="op">(</span><span class="va">range</span>, layer_id <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>range</code></dt>
<dd><p>Numeric vector of length 2: c(min, max) intensity values
that map to the colormap endpoints.</p></dd>


<dt><code>layer_id</code></dt>
<dd><p>Character string: the layer to modify. If NULL,
modifies the most recently added layer.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-set_threshold"></a><div class="section">
<h3 id="method-set-threshold-">Method <code>set_threshold()</code><a class="anchor" aria-label="anchor" href="#method-set-threshold-"></a></h3>
<p>Set the threshold range for a layer.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">set_threshold</span><span class="op">(</span><span class="va">thresh</span>, layer_id <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>thresh</code></dt>
<dd><p>Numeric vector of length 2: c(low, high). Voxels with
values between low and high are made transparent.</p></dd>


<dt><code>layer_id</code></dt>
<dd><p>Character string: the layer to modify. If NULL,
modifies the most recently added layer.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-set_colormap"></a><div class="section">
<h3 id="method-set-colormap-">Method <code>set_colormap()</code><a class="anchor" aria-label="anchor" href="#method-set-colormap-"></a></h3>
<p>Set the colormap for a layer.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">set_colormap</span><span class="op">(</span><span class="va">colormap</span>, layer_id <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>colormap</code></dt>
<dd><p>Character string: name of the colormap.</p></dd>


<dt><code>layer_id</code></dt>
<dd><p>Character string: the layer to modify. If NULL,
modifies the most recently added layer.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-set_opacity"></a><div class="section">
<h3 id="method-set-opacity-">Method <code>set_opacity()</code><a class="anchor" aria-label="anchor" href="#method-set-opacity-"></a></h3>
<p>Set the opacity for a layer.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">set_opacity</span><span class="op">(</span><span class="va">alpha</span>, layer_id <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>alpha</code></dt>
<dd><p>Numeric: opacity value from 0 (transparent) to 1 (opaque).</p></dd>


<dt><code>layer_id</code></dt>
<dd><p>Character string: the layer to modify. If NULL,
modifies the most recently added layer.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-set_crosshair"></a><div class="section">
<h3 id="method-set-crosshair-">Method <code>set_crosshair()</code><a class="anchor" aria-label="anchor" href="#method-set-crosshair-"></a></h3>
<p>Set the crosshair position (navigate to coordinates).</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">set_crosshair</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  z <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  animate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  duration <span class="op">=</span> <span class="fl">500</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>x</code></dt>
<dd><p>Numeric: X coordinate in world/mm space. Can also be a numeric
vector of length 3 containing c(x, y, z).</p></dd>


<dt><code>y</code></dt>
<dd><p>Numeric: Y coordinate (ignored if x is a length-3 vector).</p></dd>


<dt><code>z</code></dt>
<dd><p>Numeric: Z coordinate (ignored if x is a length-3 vector).</p></dd>


<dt><code>animate</code></dt>
<dd><p>Logical: if TRUE, smoothly animate the transition.</p></dd>


<dt><code>duration</code></dt>
<dd><p>Integer: animation duration in milliseconds (default 500).</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-get_crosshair"></a><div class="section">
<h3 id="method-get-crosshair-">Method <code>get_crosshair()</code><a class="anchor" aria-label="anchor" href="#method-get-crosshair-"></a></h3>
<p>Request the current crosshair position.</p>
<p>This is an asynchronous operation. The result will be sent to
<code>input$&lt;outputId&gt;_crosshair_response</code> as a list containing:</p><ul><li><p><code>world</code>: numeric vector c(x, y, z) in mm</p></li>
<li><p><code>voxel</code>: integer vector c(i, j, k) voxel indices</p></li>
<li><p><code>request_id</code>: the request_id if provided</p></li>
<li><p><code>timestamp</code>: JavaScript timestamp</p></li>
</ul><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">get_crosshair</span><span class="op">(</span>request_id <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>request_id</code></dt>
<dd><p>Optional identifier to match request with response.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-show_layer"></a><div class="section">
<h3 id="method-show-layer-">Method <code>show_layer()</code><a class="anchor" aria-label="anchor" href="#method-show-layer-"></a></h3>
<p>Make a layer visible.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">show_layer</span><span class="op">(</span><span class="va">layer_id</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_id</code></dt>
<dd><p>Character string: the layer ID to show.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-hide_layer"></a><div class="section">
<h3 id="method-hide-layer-">Method <code>hide_layer()</code><a class="anchor" aria-label="anchor" href="#method-hide-layer-"></a></h3>
<p>Hide a layer (make invisible).</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">hide_layer</span><span class="op">(</span><span class="va">layer_id</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_id</code></dt>
<dd><p>Character string: the layer ID to hide.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-8">Returns<a class="anchor" aria-label="anchor" href="#returns-8"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-set_layer_visible"></a><div class="section">
<h3 id="method-set-layer-visible-">Method <code>set_layer_visible()</code><a class="anchor" aria-label="anchor" href="#method-set-layer-visible-"></a></h3>
<p>Set layer visibility.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">set_layer_visible</span><span class="op">(</span><span class="va">layer_id</span>, <span class="va">visible</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_id</code></dt>
<dd><p>Character string: the layer ID.</p></dd>


<dt><code>visible</code></dt>
<dd><p>Logical: TRUE to show, FALSE to hide.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-9">Returns<a class="anchor" aria-label="anchor" href="#returns-9"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-set_layer_order"></a><div class="section">
<h3 id="method-set-layer-order-">Method <code>set_layer_order()</code><a class="anchor" aria-label="anchor" href="#method-set-layer-order-"></a></h3>
<p>Reorder layers in the stack.</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">set_layer_order</span><span class="op">(</span><span class="va">layer_ids</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_ids</code></dt>
<dd><p>Character vector of layer IDs in the desired order.
The first element will be at the bottom (rendered first), and the
last element will be on top (rendered last). The background layer
ID is typically "background".</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-10">Returns<a class="anchor" aria-label="anchor" href="#returns-10"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-remove_layer"></a><div class="section">
<h3 id="method-remove-layer-">Method <code>remove_layer()</code><a class="anchor" aria-label="anchor" href="#method-remove-layer-"></a></h3>
<p>Remove a layer from the viewer.</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">remove_layer</span><span class="op">(</span><span class="va">layer_id</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>layer_id</code></dt>
<dd><p>Character string: the layer ID to remove.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-11">Returns<a class="anchor" aria-label="anchor" href="#returns-11"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-get_layers"></a><div class="section">
<h3 id="method-get-layers-">Method <code>get_layers()</code><a class="anchor" aria-label="anchor" href="#method-get-layers-"></a></h3>
<p>Request a list of all layers.</p>
<p>This is an asynchronous operation. The result will be sent to
<code>input$&lt;outputId&gt;_layers_response</code> as a list containing:</p><ul><li><p><code>layers</code>: list of layer info (id, visible, opacity, index)</p></li>
<li><p><code>request_id</code>: the request_id if provided</p></li>
<li><p><code>timestamp</code>: JavaScript timestamp</p></li>
</ul><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">get_layers</span><span class="op">(</span>request_id <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>request_id</code></dt>
<dd><p>Optional identifier to match request with response.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-12">Returns<a class="anchor" aria-label="anchor" href="#returns-12"></a></h4>
<p>The proxy object invisibly (for method chaining).</p>
</div>

</div><p></p><hr><a id="method-OrthoViewerProxy-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">OrthoViewerProxy</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># In a Shiny server function:</span></span></span>
<span class="r-in"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">output</span><span class="op">$</span><span class="va">viewer</span> <span class="op">&lt;-</span> <span class="fu"><a href="renderOrtho_viewer.html">renderOrtho_viewer</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="ortho_viewer.html">ortho_viewer</a></span><span class="op">(</span><span class="va">brain_volume</span>, bg_colormap <span class="op">=</span> <span class="st">"Greys"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Add an overlay layer</span></span></span>
<span class="r-in"><span>  <span class="fu">observe</span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ortho_proxy</span><span class="op">(</span><span class="st">"viewer"</span>, <span class="va">session</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">p</span><span class="op">$</span><span class="fu">add_layer</span><span class="op">(</span><span class="va">stat_map</span>, id <span class="op">=</span> <span class="st">"activation"</span>,</span></span>
<span class="r-in"><span>                thresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>, colormap <span class="op">=</span> <span class="st">"hot"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Navigate to a coordinate when button is clicked</span></span></span>
<span class="r-in"><span>  <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">go_to_peak</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ortho_proxy</span><span class="op">(</span><span class="st">"viewer"</span>, <span class="va">session</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">p</span><span class="op">$</span><span class="fu">set_crosshair</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">32</span>, <span class="op">-</span><span class="fl">20</span>, <span class="fl">45</span><span class="op">)</span>, animate <span class="op">=</span> <span class="cn">TRUE</span>, duration <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Toggle layer visibility</span></span></span>
<span class="r-in"><span>  <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">toggle_activation</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ortho_proxy</span><span class="op">(</span><span class="st">"viewer"</span>, <span class="va">session</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">show_activation</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">p</span><span class="op">$</span><span class="fu">show_layer</span><span class="op">(</span><span class="st">"activation"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">p</span><span class="op">$</span><span class="fu">hide_layer</span><span class="op">(</span><span class="st">"activation"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

